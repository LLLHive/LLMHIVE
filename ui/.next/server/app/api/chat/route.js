(()=>{var e={};e.id=276,e.ids=[276],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9364:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>u});var n=r(2706),o=r(8203),i=r(5994);let a={"gpt-5":"gpt-4.1","gpt-5-mini":"gpt-4o-mini","claude-sonnet-4.5":"claude-3-sonnet-20240229","claude-haiku-4":"claude-3-haiku-20240307","grok-4":"grok-3-mini","grok-4-fast":"grok-3-mini","gemini-2.5-pro":"gemini-2.5-flash","gemini-2.5-flash":"gemini-2.5-flash","llama-4-405b":"deepseek-chat"},p=process.env.NEXT_PUBLIC_API_BASE_URL||process.env.ORCHESTRATION_API_BASE||process.env.LLMHIVE_API_URL||"http://localhost:8000",c=`${p.replace(/\/$/,"")}/api/v1/orchestration/`;async function u(e){try{let{messages:t=[],model:r,models:s,reasoningMode:n,criteriaSettings:o,orchestrationEngine:i,conversationId:p,userId:u,preset:l,useDeepconf:d,useVerification:h,formatStyle:g,clarificationResponse:f,isClarificationResponse:m,originalQuery:v,advancedFeatures:y}=await e.json(),_=[...t].reverse().find(e=>"user"===e.role);if(!_?.content)return new Response(JSON.stringify({error:"No user prompt provided."}),{status:400,headers:{"Content-Type":"application/json"}});let k={prompt:_.content,enable_memory:!0,enable_knowledge:!1};null!=p&&(k.conversation_id=p),u&&(k.user_id=u),i&&(k.protocol=i),o&&(k.criteria_settings=o),l&&(k.preset=l),void 0!==d&&(k.use_deepconf=d),void 0!==h&&(k.use_verification=h),g&&(k.format_style=g),f&&(k.clarification_response=f),void 0!==m&&(k.is_clarification_response=m),v&&(k.original_query=v);let w=(Array.isArray(s)?s:r?[r]:[]).map(e=>(function(e){if(e)return a[e]||e})(e)).filter(e=>!!e);w.length>0&&(k.models=Array.from(new Set(w)));let x=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!x.ok){let e;let t=await x.text();console.error("[LLMHive] Orchestrator error:",x.status,t);try{e=JSON.parse(t)}catch{e={detail:t}}return new Response(JSON.stringify({error:"Orchestration failed",status:x.status,backend:e}),{status:x.status,headers:{"Content-Type":"application/json"}})}let A=await x.json();return new Response(JSON.stringify({orchestration:A,model:r,reasoningMode:n,criteriaSettings:o,conversationId:A.conversation_id}),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("[LLMHive] Chat API error:",e),new Response(JSON.stringify({error:"Failed to connect to orchestration engine"}),{status:500,headers:{"Content-Type":"application/json"}})}}let l=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/camilodiaz/LLMHIVE/ui/app/api/chat/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:h,serverHooks:g}=l;function f(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{},2706:(e,t,r)=>{"use strict";e.exports=r(4870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994],()=>r(9364));module.exports=s})();